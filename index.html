@@ .. @@
                        messages: [
                             {
                                 role: "user",
                                content: "You are an expert text editor specializing in handwritten content. Your task is to improve and correct text that was extracted from handwritten documents. Focus on:\n\n1. Correcting obvious spelling mistakes while preserving the original meaning\n2. Fixing grammar errors that are clearly unintentional\n3. Improving punctuation and capitalization\n4. Maintaining the original structure and formatting\n5. Preserving unique writing style and voice\n6. Keeping all original content - don't add or remove information\n7. If uncertain about a word, keep the original extraction\n\nReturn the improved text while maintaining the authentic voice and content of the original handwriting."
                                     {
                                         type: "text",
                                        text: "You are an expert at reading handwritten text. Please extract ALL text from this image with the highest accuracy possible. This may include handwritten notes, cursive writing, printed text, or mixed content. Pay special attention to:\n\n1. Handwritten text in any style (cursive, print, messy handwriting)\n2. Different pen colors or writing instruments\n3. Text at various angles or orientations\n4. Faded or light text\n5. Text with corrections, cross-outs, or annotations\n6. Numbers, dates, and special characters\n7. Maintain original line breaks and paragraph structure\n8. Include punctuation marks accurately\n\nReturn ONLY the extracted text exactly as written, preserving the original formatting and structure. Do not add any commentary, explanations, or interpretations."
                                     },
                                     {
                                         type: "image_url",
                                content: `Please improve and correct the following handwritten text that was extracted from an image. Focus on spelling, grammar, and formatting while preserving the original meaning and style:\n\n${extractedText}`
                             }
                         ],
                        max_tokens: 2000,
                        temperature: 0.1
                     })
                 });

                 showStatus('Text extraction with GPT-4 Vision completed successfully!', 'success');
                
                // Re-enable extract button for re-processing if needed
                extractBtn.disabled = false;
                 
            } catch (error) {